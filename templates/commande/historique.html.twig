{% extends 'base.html.twig' %}

{% block body %}
	<div class="container">
		<h1>Historique de mes commandes</h1>

		{% if commandes is empty %}
			<p>Vous n'avez pas encore passé de commande.</p>
		{% else %}
			<table class="commandes-table">
				<thead>
					<tr>
						<th>N° Commande</th>
						<th>Date</th>
						<th>Image</th>
						<th>Produit</th>
						<th>Prix</th>
						<th>Nom Client</th>
						<th>Quantité</th>
					</tr>
				</thead>
				<tbody>
					{% for commande in commandes %}
						<tr>
							<td>#{{ commande.id }}</td>
							<td>{{ commande.dateCommande|date('d/m/Y H:i') }}</td>
							<td>
								{% if commande.image %}
									<img src="{{ asset('images/produits/' ~ commande.image) }}" alt="{{ commande.produit }}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 5px;">
								{% else %}
									<img src="{{ asset('images/default-avatar.jpg') }}" alt="Image non disponible" style="width: 60px; height: 60px; object-fit: cover; border-radius: 5px;">
								{% endif %}
							</td>
							<td>{{ commande.produit }}</td>
							<td>{{ commande.prix ? commande.prix ~ ' €' : '-' }}</td>
							<td>{{ commande.nomClient }}</td>
							<td>{{ commande.quantite }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		{% endif %}
	</div>
{% endblock %}
